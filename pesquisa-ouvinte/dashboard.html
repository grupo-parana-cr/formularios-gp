<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Pesquisa Super FM</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="dashboard-styles.css">
</head>
<body>
    <!-- Tela de Login -->
    <div id="loginScreen" class="login-screen">
        <div class="login-container">
            <img src="Super_FM.png" alt="Super FM" class="logo">
            <h1>Dashboard de Pesquisa</h1>
            <p>Acesso Restrito</p>
            
            <form id="loginForm">
                <div class="form-group">
                    <label>ğŸ‘¤ UsuÃ¡rio:</label>
                    <input type="text" id="username" placeholder="Digite seu nome" required>
                </div>
                <div class="form-group">
                    <label>ğŸ”’ Senha:</label>
                    <input type="password" id="password" placeholder="Digite sua senha" required>
                </div>
                <button type="submit" class="btn btn-login">Entrar</button>
            </form>
        </div>
    </div>

    <!-- Dashboard Principal -->
    <div id="dashboardScreen" class="dashboard-screen" style="display: none;">
        <!-- Header -->
        <header class="dashboard-header">
            <div class="header-left">
                <img src="Super_FM.png" alt="Super FM" class="logo-small">
                <h1>Dashboard de Pesquisa</h1>
            </div>
            <div class="header-right">
                <span class="user-name" id="userName"></span>
                <button onclick="logout()" class="btn btn-logout">Sair</button>
            </div>
        </header>

        <!-- NavegaÃ§Ã£o das Abas -->
        <div class="tabs-container">
            <button class="tab-btn active" onclick="switchTab('respostas')">ğŸ“Š Respostas</button>
            <button class="tab-btn" onclick="switchTab('sorteio')">ğŸ† Sorteio</button>
        </div>

        <!-- ===================================
             ABA 1: RESPOSTAS
             =================================== -->
        <div id="tab-respostas" class="tab-content active">
            
            <!-- Controles -->
            <div class="controls">
                <button onclick="refreshData()" class="btn btn-refresh">ğŸ”„ Atualizar Dados</button>
                <div class="last-update" id="lastUpdate">Ãšltima atualizaÃ§Ã£o: --</div>
            </div>

            <!-- EstatÃ­sticas RÃ¡pidas -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">ğŸ“Š</div>
                    <div class="stat-info">
                        <div class="stat-value" id="totalRespostas">0</div>
                        <div class="stat-label">Total de Respostas</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">ğŸ•</div>
                    <div class="stat-info">
                        <div class="stat-value" id="horarioFavorito">--</div>
                        <div class="stat-label">HorÃ¡rio Mais Ouvido</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">ğŸµ</div>
                    <div class="stat-info">
                        <div class="stat-value" id="estiloFavorito">--</div>
                        <div class="stat-label">Estilo Mais Popular</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">â­</div>
                    <div class="stat-info">
                        <div class="stat-value" id="programaFavorito">--</div>
                        <div class="stat-label">Programa Favorito</div>
                    </div>
                </div>
            </div>

            <!-- GrÃ¡ficos -->
            <div class="charts-grid">
                <!-- GrÃ¡fico 1: HorÃ¡rios -->
                <div class="chart-card">
                    <h2>ğŸ“… HorÃ¡rios de AudiÃªncia</h2>
                    <canvas id="chartHorarios"></canvas>
                </div>

                <!-- GrÃ¡fico 2: Estilos Musicais -->
                <div class="chart-card">
                    <h2>ğŸµ Estilos Musicais Preferidos</h2>
                    <canvas id="chartEstilos"></canvas>
                </div>

                <!-- GrÃ¡fico 3: Locutores -->
                <div class="chart-card">
                    <h2>ğŸ™ï¸ Locutores Favoritos</h2>
                    <canvas id="chartLocutores"></canvas>
                </div>

                <!-- GrÃ¡fico 4: Programas -->
                <div class="chart-card">
                    <h2>ğŸ“º Programas Favoritos</h2>
                    <canvas id="chartProgramas"></canvas>
                </div>

                <!-- GrÃ¡fico 5: Plataformas -->
                <div class="chart-card">
                    <h2>ğŸ“± Como Ouvem</h2>
                    <canvas id="chartPlataformas"></canvas>
                </div>

                <!-- GrÃ¡fico 6: Faixa EtÃ¡ria -->
                <div class="chart-card">
                    <h2>ğŸ‘¥ Faixa EtÃ¡ria dos Ouvintes</h2>
                    <canvas id="chartIdade"></canvas>
                </div>

                <!-- GrÃ¡fico 7: Motivos -->
                <div class="chart-card full-width">
                    <h2>ğŸ’™ Motivos para Ouvir a Super FM</h2>
                    <canvas id="chartMotivos"></canvas>
                </div>
            </div>

            <!-- Tabela de Respostas -->
            <div class="table-container">
                <div class="table-wrapper">
                    <h2>ğŸ“‹ Respostas Detalhadas</h2>
                    <div class="table-scroll">
                        <table id="respostasTable">
                            <thead>
                                <tr>
                                    <th>Data/Hora</th>
                                    <th>HorÃ¡rio</th>
                                    <th>Estilo</th>
                                    <th>Locutor</th>
                                    <th>Programa</th>
                                    <th>Muda RÃ¡dio</th>
                                    <th>Companhia</th>
                                    <th>Motivos</th>
                                    <th>Plataforma</th>
                                    <th>Novo ConteÃºdo</th>
                                    <th>AnÃºncios</th>
                                    <th>Nome</th>
                                    <th>CPF</th>
                                    <th>Telefone</th>
                                    <th>Sexo</th>
                                    <th>Idade</th>
                                </tr>
                            </thead>
                            <tbody id="respostasBody">
                                <tr>
                                    <td colspan="16" class="no-data">Carregando dados...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

        </div>

        <!-- ===================================
             ABA 2: SORTEIO - NOVA VERSÃƒO
             =================================== -->
        <div id="tab-sorteio" class="tab-content">
            
            <div class="sorteio-container">
                
                <!-- TELA INICIAL (Carregar Participantes) -->
                <div id="telaCarregarParticipantes" class="sorteio-header-card tela-carregamento-inicial">
                    <div class="sorteio-title-icon">ğŸ</div>
                    <h2>Sorteio Alexa Super FM 98.9</h2>
                    <p class="sorteio-date">ğŸ“… Data: 10/12/2025</p>
                    <p class="mensagem-inicial">Clique abaixo para carregar os participantes da pesquisa</p>
                    <button onclick="carregarParticipantes()" class="btn btn-sortear" id="btnCarregar">
                        ğŸ“¥ CARREGAR PARTICIPANTES
                    </button>
                </div>

                <!-- TELA DE CARREGAMENTO -->
                <div id="telaCarregando" class="sorteio-header-card" style="display: none;">
                    <div class="sorteio-title-icon">ğŸ“‹</div>
                    <h2>Carregando Participantes...</h2>
                    
                    <div class="lista-carregamento">
                        <div id="listaParticipantesCarregando" class="participantes-lista">
                            <!-- Nomes aparecem aqui um a um -->
                        </div>
                        <div class="loading-spinner-inline"></div>
                    </div>
                </div>

                <!-- CABEÃ‡ALHO DO SORTEIO (aparece apÃ³s carregar) -->
                <div id="sorteioHeaderCard" class="sorteio-header-card" style="display: none;">
                    <div class="sorteio-title-icon">ğŸ</div>
                    <h2>Sorteio Alexa Super FM 98.9</h2>
                    <p class="sorteio-date">ğŸ“… Data: 10/12/2025</p>
                    <div class="sorteio-stats">
                        <div class="sorteio-stat">
                            <span class="sorteio-stat-label">Participantes:</span>
                            <span class="sorteio-stat-value" id="totalParticipantes">0</span>
                        </div>
                        <div class="sorteio-stat">
                            <span class="sorteio-stat-label">JÃ¡ Sorteados:</span>
                            <span class="sorteio-stat-value" id="totalSorteados">0</span>
                        </div>
                    </div>
                </div>

                <!-- BotÃ£o Sortear (aparece apÃ³s carregar) -->
                <button onclick="iniciarSorteio()" class="btn btn-sortear" id="btnSortear" style="display: none;">
                    ğŸ² SORTEAR AGORA
                </button>

                <!-- Ãrea de Sorteio (animaÃ§Ã£o) -->
                <div id="sorteioArea" class="sorteio-area" style="display: none;">
                    <!-- Mensagem de carregamento -->
                    <div id="carregando" class="sorteio-loading">
                        <div class="loading-spinner"></div>
                        <p id="mensagemCarregamento">Carregando participantes...</p>
                    </div>

                    <!-- Contagem -->
                    <div id="contagem" class="sorteio-contagem" style="display: none;">
                        <div class="contagem-numero" id="numeroContagem">10</div>
                        <p>Preparando sorteio...</p>
                    </div>

                    <!-- Resultado -->
                    <div id="resultado" class="sorteio-resultado" style="display: none;">
                        <div class="resultado-confetti">ğŸ‰ ğŸ‰ ğŸ‰</div>
                        <h3>VENCEDOR!</h3>
                        <div class="resultado-card">
                            <div class="resultado-dados">
                                <div class="resultado-item">
                                    <span class="resultado-label">ğŸ‘¤ Nome:</span>
                                    <span class="resultado-valor" id="resultadoNome">--</span>
                                </div>
                                <div class="resultado-item">
                                    <span class="resultado-label">ğŸ†” CPF:</span>
                                    <span class="resultado-valor" id="resultadoCPF">--</span>
                                </div>
                                <div class="resultado-item">
                                    <span class="resultado-label">ğŸ“ Telefone:</span>
                                    <span class="resultado-valor" id="resultadoTelefone">--</span>
                                </div>
                                <div class="resultado-item">
                                    <span class="resultado-label">ğŸ• Hora:</span>
                                    <span class="resultado-valor" id="resultadoHora">--</span>
                                </div>
                            </div>
                        </div>
                        <button onclick="fecharResultado()" class="btn btn-primary">Novo Sorteio</button>
                    </div>
                </div>

                <!-- HistÃ³rico de Sorteios -->
                <div id="historicoSorteiosContainer" class="sorteio-historico" style="display: none;">
                    <h3>ğŸ“œ HistÃ³rico de Sorteios</h3>
                    <div id="historicoLista" class="historico-lista">
                        <p class="historico-vazio">Nenhum sorteio realizado ainda</p>
                    </div>
                    
                    <!-- BotÃ£o Resetar -->
                    <div style="margin-top: 30px; text-align: center;">
                        <button onclick="abrirModalReset()" class="btn btn-resetar">
                            ğŸ”„ RESETAR HISTÃ“RICO
                        </button>
                    </div>
                </div>

            </div>

        </div>

    </div>

    <!-- MODAL DE CONFIRMAÃ‡ÃƒO PARA RESETAR -->
    <div id="modalReset" class="modal-reset" style="display: none;">
        <div class="modal-reset-content">
            <div class="modal-icon">âš ï¸</div>
            <h2>Confirmar Reset?</h2>
            <p>Tem certeza que deseja <strong>RESETAR</strong> o histÃ³rico de sorteios?</p>
            <p class="modal-aviso">âš ï¸ Isso vai limpar todos os sorteios realizados e permitir que os participantes sejam sorteados novamente.</p>
            
            <div class="modal-buttons">
                <button onclick="fecharModalReset()" class="btn btn-modal-cancel">âŒ Cancelar</button>
                <button onclick="confirmarReset()" class="btn btn-modal-confirm">âœ… Sim, Resetar</button>
            </div>
        </div>
    </div>

    <script src="dashboard-script.js"></script>
</body>
</html>
