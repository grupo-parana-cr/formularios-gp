<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vistoria Veicular</title>
    <style>
        :root {
            --primary-blue: #004AC9;
            --primary-red: #ed383b;
            --dark-gray: #2b2c34;
            --light-blue: #E8F2FF;
            --light-gray: #F5F6FA;
            --success-green: #28A745;
            --white: #FFFFFF;
            --text-primary: #2b2c34;
            --text-secondary: #6C757D;
            --border-color: #E1E5E9;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--light-blue) 0%, var(--light-gray) 100%);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
            padding: 10px;
        }

        .container {
            max-width: 500px;
            margin: 0 auto;
        }

        .logo {
            max-width: 90px;
            display: block;
            margin: 0 auto 20px auto;
        }

        .form-header {
            background: var(--white);
            padding: 24px 20px;
            border-radius: 16px 16px 0 0;
            text-align: center;
            box-shadow: 0 2px 20px rgba(0, 74, 201, 0.1);
        }

        .form-header h1 {
            color: var(--primary-blue);
            font-size: 1.8em;
            margin-bottom: 12px;
            font-weight: 700;
        }

        .form-header p {
            color: var(--text-secondary);
            font-size: 1em;
        }

        .form-container {
            background: var(--white);
            border-radius: 0 0 16px 16px;
            box-shadow: 0 4px 30px rgba(0, 74, 201, 0.15);
            overflow: hidden;
        }

        .progress-indicator {
            padding: 16px 20px;
            background: var(--light-blue);
            text-align: center;
            font-weight: 600;
            color: var(--primary-blue);
            border-bottom: 1px solid var(--border-color);
        }

        .progress-bar {
            width: 100%;
            height: 6px;
            background: var(--border-color);
            border-radius: 3px;
            overflow: hidden;
            margin-top: 8px;
        }

        .progress-fill {
            height: 100%;
            background: var(--primary-blue);
            transition: width 0.3s ease;
            border-radius: 3px;
        }

        .form-section {
            padding: 24px 20px 20px 20px;
            border-bottom: 1px solid var(--border-color);
            display: none;
        }

        .form-section.active {
            display: block;
        }

        .section-title {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            font-size: 1.2em;
            font-weight: 600;
            color: var(--dark-gray);
        }

        .section-title::before {
            content: '';
            width: 4px;
            height: 20px;
            background: var(--primary-blue);
            margin-right: 10px;
            border-radius: 2px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--text-primary);
            font-size: 0.95em;
            display: block;
        }

        .required::after {
            content: ' *';
            color: var(--primary-red);
            font-weight: bold;
        }

        input, textarea {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s ease;
            background: var(--white);
            color: var(--text-primary);
            box-sizing: border-box;
            display: block;
        }

        input[type="date"] {
            max-width: 100%;
            -webkit-appearance: none;
            appearance: none;
        }

        input[type="date"]::-webkit-date-and-time-value {
            text-align: left;
        }

        input:focus, textarea:focus {
            outline: none;
            border-color: var(--primary-blue);
            box-shadow: 0 0 0 3px rgba(0, 74, 201, 0.1);
            background: var(--light-blue);
        }

        input.error, textarea.error {
            border-color: var(--primary-red);
            background-color: #fff5f5;
        }

        textarea {
            resize: vertical;
            min-height: 80px;
        }

        .vistoria-item {
            background: var(--light-gray);
            padding: 16px;
            border-radius: 8px;
        }

        .vistoria-titulo {
            font-weight: 600;
            font-size: 1em;
            margin-bottom: 12px;
            color: var(--dark-gray);
        }

        .radio-group {
            display: flex;
            gap: 12px;
            margin-top: 8px;
        }

        .radio-item {
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            background: var(--white);
            padding: 12px 16px;
            border-radius: 8px;
            transition: all 0.3s ease;
            border: 2px solid var(--border-color);
            flex: 1;
            font-weight: 500;
            position: relative;
        }

        .radio-item:hover {
            background: var(--light-blue);
            border-color: var(--primary-blue);
        }

        .radio-item input[type="radio"] {
            position: absolute;
            opacity: 0;
            cursor: pointer;
        }

        .radio-item label {
            cursor: pointer;
            margin: 0;
            font-weight: 500;
            color: var(--text-primary);
            text-align: center;
            width: 100%;
        }

        .radio-item.selected-ok {
            background: var(--success-green);
            color: white;
            border-color: var(--success-green);
        }

        .radio-item.selected-ok label {
            color: white;
        }

        .radio-item.selected-irregular {
            background: var(--primary-red);
            color: white;
            border-color: var(--primary-red);
        }

        .radio-item.selected-irregular label {
            color: white;
        }

        .descricao-container {
            margin-top: 12px;
            display: none;
        }

        .descricao-container.show {
            display: block;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .error-message {
            color: var(--primary-red);
            font-size: 0.85em;
            margin-top: 4px;
            display: none;
        }

        .navigation-buttons {
            padding: 20px;
            background: var(--white);
            display: flex;
            justify-content: space-between;
            gap: 12px;
            border-top: 1px solid var(--border-color);
        }

        .navigation-buttons.first-section {
            justify-content: flex-end;
        }

        .nav-btn {
            background: var(--primary-blue);
            color: white;
            border: none;
            padding: 14px 24px;
            font-size: 1em;
            font-weight: 600;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            flex: 1;
            max-width: 200px;
        }

        .nav-btn:hover:not(:disabled) {
            background: #0056d3;
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 74, 201, 0.3);
        }

        .nav-btn:disabled {
            background: var(--text-secondary);
            cursor: not-allowed;
            opacity: 0.5;
        }

        .nav-btn.btn-prev {
            background: var(--light-gray);
            color: var(--text-primary);
            border: 2px solid var(--border-color);
        }

        .nav-btn.btn-prev:hover:not(:disabled) {
            background: var(--light-blue);
            border-color: var(--primary-blue);
        }

        .nav-btn.btn-submit {
            background: var(--success-green);
        }

        .nav-btn.btn-submit:hover:not(:disabled) {
            background: #218838;
        }

        .form-footer {
            padding: 16px 20px;
            background: var(--light-gray);
            text-align: center;
            color: var(--text-secondary);
            font-size: 0.9em;
            border-top: 1px solid var(--border-color);
        }

        .form-footer strong {
            color: var(--primary-blue);
        }

        @media (max-width: 768px) {
            .form-section {
                padding: 24px 24px 20px 24px;
            }
            
            input[type="date"] {
                width: 100% !important;
                max-width: 100% !important;
            }
        }

        @media (max-width: 375px) {
            .form-header, .form-section, .navigation-buttons {
                padding: 16px;
            }

            .form-section {
                padding: 24px 20px 16px 20px;
            }

            input, textarea {
                margin: 0 4px;
                width: calc(100% - 8px);
            }

            .form-header h1 {
                font-size: 1.6em;
            }

            .radio-group {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="form-header">
            <img src="../img/logo-grupo-parana.png" alt="Logo Grupo Paraná" class="logo">
            <h1>Vistoria Veicular</h1>
            <p>Checklist completo do veículo</p>
        </div>

        <form id="vistoriaForm" class="form-container" novalidate>
            <div class="progress-indicator">
                <div id="progressText">Página 1 de 14</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 7%"></div>
                </div>
            </div>

            <!-- Seção 1: Dados Básicos -->
            <div class="form-section active" data-section="1">
                <h2 class="section-title">Dados Básicos</h2>
                
                <div class="form-group">
                    <label for="dataVistoria" class="required">Data</label>
                    <input type="date" id="dataVistoria" name="dataVistoria" required>
                    <div class="error-message">Campo obrigatório</div>
                </div>

                <div class="form-group">
                    <label for="condutorVeiculo" class="required">Condutor do Veículo</label>
                    <input type="text" id="condutorVeiculo" name="condutorVeiculo" required>
                    <div class="error-message">Campo obrigatório</div>
                </div>

                <div class="form-group">
                    <label for="placaVeiculo" class="required">Placa</label>
                    <input type="text" id="placaVeiculo" name="placaVeiculo" placeholder="Ex: BRA-2E19" maxlength="8" required>
                    <div class="error-message">Campo obrigatório</div>
                </div>
            </div>

            <!-- Seções 2-13: Itens de Vistoria -->
            <div class="form-section" data-section="2">
                <h2 class="section-title">Itens de Vistoria</h2>
                <div class="vistoria-item">
                    <div class="vistoria-titulo">Nível de óleo do motor</div>
                    <div class="radio-group">
                        <div class="radio-item">
                            <input type="radio" id="oleoOk" name="nivelOleo" value="ok" required>
                            <label for="oleoOk">Está ok</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" id="oleoIrregular" name="nivelOleo" value="irregular" required>
                            <label for="oleoIrregular">Irregular</label>
                        </div>
                    </div>
                    <div class="descricao-container" data-for="nivelOleo">
                        <label for="descricaoOleo" class="required">Descrição da irregularidade (Nível do Óleo do Motor)</label>
                        <textarea id="descricaoOleo" name="descricaoOleo" placeholder="Descreva a irregularidade encontrada..."></textarea>
                        <div class="error-message">Campo obrigatório quando irregular</div>
                    </div>
                    <div class="error-message">Selecione uma opção</div>
                </div>
            </div>

            <div class="form-section" data-section="3">
                <h2 class="section-title">Itens de Vistoria</h2>
                <div class="vistoria-item">
                    <div class="vistoria-titulo">Nível de água do radiador</div>
                    <div class="radio-group">
                        <div class="radio-item">
                            <input type="radio" id="aguaOk" name="nivelAgua" value="ok" required>
                            <label for="aguaOk">Está ok</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" id="aguaIrregular" name="nivelAgua" value="irregular" required>
                            <label for="aguaIrregular">Irregular</label>
                        </div>
                    </div>
                    <div class="descricao-container" data-for="nivelAgua">
                        <label for="descricaoAgua" class="required">Descrição da irregularidade (Nível de Água do Radiador)</label>
                        <textarea id="descricaoAgua" name="descricaoAgua" placeholder="Descreva a irregularidade encontrada..."></textarea>
                        <div class="error-message">Campo obrigatório quando irregular</div>
                    </div>
                    <div class="error-message">Selecione uma opção</div>
                </div>
            </div>

            <div class="form-section" data-section="4">
                <h2 class="section-title">Itens de Vistoria</h2>
                <div class="vistoria-item">
                    <div class="vistoria-titulo">Condição dos pneus (calibragem/desgaste)</div>
                    <div class="radio-group">
                        <div class="radio-item">
                            <input type="radio" id="pneusOk" name="condicaoPneus" value="ok" required>
                            <label for="pneusOk">Está ok</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" id="pneusIrregular" name="condicaoPneus" value="irregular" required>
                            <label for="pneusIrregular">Irregular</label>
                        </div>
                    </div>
                    <div class="descricao-container" data-for="condicaoPneus">
                        <label for="descricaoPneus" class="required">Descrição da irregularidade (Condição dos Pneus)</label>
                        <textarea id="descricaoPneus" name="descricaoPneus" placeholder="Descreva a irregularidade encontrada..."></textarea>
                        <div class="error-message">Campo obrigatório quando irregular</div>
                    </div>
                    <div class="error-message">Selecione uma opção</div>
                </div>
            </div>

            <div class="form-section" data-section="5">
                <h2 class="section-title">Itens de Vistoria</h2>
                <div class="vistoria-item">
                    <div class="vistoria-titulo">Luzes (faróis, setas, freio)</div>
                    <div class="radio-group">
                        <div class="radio-item">
                            <input type="radio" id="luzesOk" name="luzes" value="ok" required>
                            <label for="luzesOk">Está ok</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" id="luzesIrregular" name="luzes" value="irregular" required>
                            <label for="luzesIrregular">Irregular</label>
                        </div>
                    </div>
                    <div class="descricao-container" data-for="luzes">
                        <label for="descricaoLuzes" class="required">Descrição da irregularidade (Luzes)</label>
                        <textarea id="descricaoLuzes" name="descricaoLuzes" placeholder="Descreva a irregularidade encontrada..."></textarea>
                        <div class="error-message">Campo obrigatório quando irregular</div>
                    </div>
                    <div class="error-message">Selecione uma opção</div>
                </div>
            </div>

            <div class="form-section" data-section="6">
                <h2 class="section-title">Itens de Vistoria</h2>
                <div class="vistoria-item">
                    <div class="vistoria-titulo">Freios (teste de funcionamento)</div>
                    <div class="radio-group">
                        <div class="radio-item">
                            <input type="radio" id="freiosOk" name="freios" value="ok" required>
                            <label for="freiosOk">Está ok</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" id="freiosIrregular" name="freios" value="irregular" required>
                            <label for="freiosIrregular">Irregular</label>
                        </div>
                    </div>
                    <div class="descricao-container" data-for="freios">
                        <label for="descricaoFreios" class="required">Descrição da irregularidade (Freios)</label>
                        <textarea id="descricaoFreios" name="descricaoFreios" placeholder="Descreva a irregularidade encontrada..."></textarea>
                        <div class="error-message">Campo obrigatório quando irregular</div>
                    </div>
                    <div class="error-message">Selecione uma opção</div>
                </div>
            </div>

            <div class="form-section" data-section="7">
                <h2 class="section-title">Itens de Vistoria</h2>
                <div class="vistoria-item">
                    <div class="vistoria-titulo">Limpador de para-brisa</div>
                    <div class="radio-group">
                        <div class="radio-item">
                            <input type="radio" id="limpadorOk" name="limpador" value="ok" required>
                            <label for="limpadorOk">Está ok</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" id="limpadorIrregular" name="limpador" value="irregular" required>
                            <label for="limpadorIrregular">Irregular</label>
                        </div>
                    </div>
                    <div class="descricao-container" data-for="limpador">
                        <label for="descricaoLimpador" class="required">Descrição da irregularidade (Limpador de Para-brisa)</label>
                        <textarea id="descricaoLimpador" name="descricaoLimpador" placeholder="Descreva a irregularidade encontrada..."></textarea>
                        <div class="error-message">Campo obrigatório quando irregular</div>
                    </div>
                    <div class="error-message">Selecione uma opção</div>
                </div>
            </div>

            <div class="form-section" data-section="8">
                <h2 class="section-title">Itens de Vistoria</h2>
                <div class="vistoria-item">
                    <div class="vistoria-titulo">Nível de combustível</div>
                    <div class="radio-group">
                        <div class="radio-item">
                            <input type="radio" id="combustivelOk" name="combustivel" value="ok" required>
                            <label for="combustivelOk">Está ok</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" id="combustivelIrregular" name="combustivel" value="irregular" required>
                            <label for="combustivelIrregular">Irregular</label>
                        </div>
                    </div>
                    <div class="descricao-container" data-for="combustivel">
                        <label for="descricaoCombustivel" class="required">Descrição da irregularidade (Nível de Combustível)</label>
                        <textarea id="descricaoCombustivel" name="descricaoCombustivel" placeholder="Descreva a irregularidade encontrada..."></textarea>
                        <div class="error-message">Campo obrigatório quando irregular</div>
                    </div>
                    <div class="error-message">Selecione uma opção</div>
                </div>
            </div>

            <div class="form-section" data-section="9">
                <h2 class="section-title">Itens de Vistoria</h2>
                <div class="vistoria-item">
                    <div class="vistoria-titulo">Itens obrigatórios (macaco, estepe, triângulo, chave de roda)</div>
                    <div class="radio-group">
                        <div class="radio-item">
                            <input type="radio" id="itensOk" name="itensObrigatorios" value="ok" required>
                            <label for="itensOk">Está ok</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" id="itensIrregular" name="itensObrigatorios" value="irregular" required>
                            <label for="itensIrregular">Irregular</label>
                        </div>
                    </div>
                    <div class="descricao-container" data-for="itensObrigatorios">
                        <label for="descricaoItens" class="required">Descrição da irregularidade (Itens Obrigatórios)</label>
                        <textarea id="descricaoItens" name="descricaoItens" placeholder="Descreva a irregularidade encontrada..."></textarea>
                        <div class="error-message">Campo obrigatório quando irregular</div>
                    </div>
                    <div class="error-message">Selecione uma opção</div>
                </div>
            </div>

            <!-- <div class="form-section" data-section="10">
                <h2 class="section-title">Itens de Vistoria</h2>
                <div class="vistoria-item">
                    <div class="vistoria-titulo">Documentação do veículo</div>
                    <div class="radio-group">
                        <div class="radio-item">
                            <input type="radio" id="docOk" name="documentacao" value="ok" required>
                            <label for="docOk">Está ok</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" id="docIrregular" name="documentacao" value="irregular" required>
                            <label for="docIrregular">Irregular</label>
                        </div>
                    </div>
                    <div class="descricao-container" data-for="documentacao">
                        <label for="descricaoDoc" class="required">Descrição da irregularidade (Documentação do Veículo)</label>
                        <textarea id="descricaoDoc" name="descricaoDoc" placeholder="Descreva a irregularidade encontrada..."></textarea>
                        <div class="error-message">Campo obrigatório quando irregular</div>
                    </div>
                    <div class="error-message">Selecione uma opção</div>
                </div>
            </div> -->

            <div class="form-section" data-section="11">
                <h2 class="section-title">Itens de Vistoria</h2>
                <div class="vistoria-item">
                    <div class="vistoria-titulo">Cinto de segurança</div>
                    <div class="radio-group">
                        <div class="radio-item">
                            <input type="radio" id="cintoOk" name="cintoSeguranca" value="ok" required>
                            <label for="cintoOk">Está ok</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" id="cintoIrregular" name="cintoSeguranca" value="irregular" required>
                            <label for="cintoIrregular">Irregular</label>
                        </div>
                    </div>
                    <div class="descricao-container" data-for="cintoSeguranca">
                        <label for="descricaoCinto" class="required">Descrição da irregularidade (Cinto de Segurança)</label>
                        <textarea id="descricaoCinto" name="descricaoCinto" placeholder="Descreva a irregularidade encontrada..."></textarea>
                        <div class="error-message">Campo obrigatório quando irregular</div>
                    </div>
                    <div class="error-message">Selecione uma opção</div>
                </div>
            </div>

            <div class="form-section" data-section="12">
                <h2 class="section-title">Itens de Vistoria</h2>
                <div class="vistoria-item">
                    <div class="vistoria-titulo">Ruídos ou vibrações anormais</div>
                    <div class="radio-group">
                        <div class="radio-item">
                            <input type="radio" id="ruidosOk" name="ruidosVibracoes" value="ok" required>
                            <label for="ruidosOk">Está ok</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" id="ruidosIrregular" name="ruidosVibracoes" value="irregular" required>
                            <label for="ruidosIrregular">Irregular</label>
                        </div>
                    </div>
                    <div class="descricao-container" data-for="ruidosVibracoes">
                        <label for="descricaoRuidos" class="required">Descrição da irregularidade (Ruídos ou Vibrações)</label>
                        <textarea id="descricaoRuidos" name="descricaoRuidos" placeholder="Descreva a irregularidade encontrada..."></textarea>
                        <div class="error-message">Campo obrigatório quando irregular</div>
                    </div>
                    <div class="error-message">Selecione uma opção</div>
                </div>
            </div>

            <div class="form-section" data-section="13">
                <h2 class="section-title">Itens de Vistoria</h2>
                <div class="vistoria-item">
                    <div class="vistoria-titulo">Higienização interna</div>
                    <div class="radio-group">
                        <div class="radio-item">
                            <input type="radio" id="higienizacaoOk" name="higienizacao" value="ok" required>
                            <label for="higienizacaoOk">Está ok</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" id="higienizacaoIrregular" name="higienizacao" value="irregular" required>
                            <label for="higienizacaoIrregular">Irregular</label>
                        </div>
                    </div>
                    <div class="descricao-container" data-for="higienizacao">
                        <label for="descricaoHigienizacao" class="required">Descrição da irregularidade (Higienização Interna)</label>
                        <textarea id="descricaoHigienizacao" name="descricaoHigienizacao" placeholder="Descreva a irregularidade encontrada..."></textarea>
                        <div class="error-message">Campo obrigatório quando irregular</div>
                    </div>
                    <div class="error-message">Selecione uma opção</div>
                </div>
            </div>

            <!-- Seção 14: Finalização -->
            <div class="form-section" data-section="14">
                <h2 class="section-title">Finalizar Vistoria</h2>
                <div style="text-align: center; padding: 20px; background: var(--light-blue); border-radius: 8px;">
                    <p style="font-weight: 600; color: var(--primary-blue); margin-bottom: 8px;">
                        ✓ Vistoria Completa
                    </p>
                    <p style="font-size: 0.9em; color: var(--text-secondary);">
                        Todos os itens foram verificados
                    </p>
                </div>
                <p style="text-align: center; color: var(--text-secondary); margin: 20px 0;">
                    Clique em "Enviar" para finalizar a vistoria.
                </p>
            </div>

            <!-- Botões de Navegação -->
            <div class="navigation-buttons first-section">
                <button type="button" class="nav-btn btn-prev" id="prevBtn" style="display: none;">Voltar</button>
                <button type="button" class="nav-btn btn-next" id="nextBtn">Avançar</button>
                <button type="submit" class="nav-btn btn-submit" id="submitBtn" style="display: none;">Enviar</button>
            </div>

            <!-- Rodapé -->
            <div class="form-footer">
                Este formulário foi criado pelo <strong>Grupo Paraná</strong>
            </div>
        </form>
    </div>

    <script>
        // Máscara de placa
        function applyPlacaMask(value) {
            value = value.replace(/[^a-zA-Z0-9]/g, '').toUpperCase();
            if (value.length === 0) return '';
            if (value.length <= 3) return value;
            return value.substring(0, 3) + '-' + value.substring(3, 7);
        }

        document.getElementById('placaVeiculo').addEventListener('input', function(e) {
            const cursorPosition = e.target.selectionStart;
            const oldValue = e.target.value;
            const newValue = applyPlacaMask(e.target.value);
            e.target.value = newValue;
            
            let newCursorPos = cursorPosition;
            if (newValue.length > oldValue.length && newValue.charAt(3) === '-' && cursorPosition === 4) {
                newCursorPos = 5;
            }
            e.target.setSelectionRange(newCursorPos, newCursorPos);
        });

        // Auto-preencher data
        document.getElementById('dataVistoria').valueAsDate = new Date();

        // Configurar event listeners para os radios
        const radioNames = [
            'nivelOleo', 'nivelAgua', 'condicaoPneus', 'luzes', 'freios',
            'limpador', 'combustivel', 'itensObrigatorios', 
            //'documentacao',
            'cintoSeguranca', 'ruidosVibracoes', 'higienizacao'
        ];

        radioNames.forEach(radioName => {
            const radios = document.querySelectorAll(`input[name="${radioName}"]`);
            const descricaoContainer = document.querySelector(`[data-for="${radioName}"]`);
            
            radios.forEach(radio => {
                radio.addEventListener('change', function() {
                    // Remove seleção visual de todos
                    radios.forEach(r => {
                        r.closest('.radio-item').classList.remove('selected-ok', 'selected-irregular');
                    });
                    
                    // Adiciona classe ao selecionado
                    if (this.value === 'ok') {
                        this.closest('.radio-item').classList.add('selected-ok');
                        descricaoContainer.classList.remove('show');
                        const textarea = descricaoContainer.querySelector('textarea');
                        textarea.value = '';
                        textarea.removeAttribute('required');
                    } else {
                        this.closest('.radio-item').classList.add('selected-irregular');
                        descricaoContainer.classList.add('show');
                        const textarea = descricaoContainer.querySelector('textarea');
                        textarea.setAttribute('required', 'required');
                    }
                });
            });
        });

        // Sistema de navegação (ajustar caso necessario se for usar documentacao para 14)
        let currentSection = 1;
        const totalSections = 13;

        function updateSection() {
            document.querySelectorAll('.form-section').forEach(section => {
                section.classList.remove('active');
            });

            const activeSection = document.querySelector(`[data-section="${currentSection}"]`);
            if (activeSection) {
                activeSection.classList.add('active');
            }

            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const submitBtn = document.getElementById('submitBtn');
            const navContainer = document.querySelector('.navigation-buttons');

            if (currentSection === 1) {
                prevBtn.style.display = 'none';
                nextBtn.style.display = 'block';
                submitBtn.style.display = 'none';
                navContainer.classList.add('first-section');
            } else if (currentSection === totalSections) {
                prevBtn.style.display = 'block';
                nextBtn.style.display = 'none';
                submitBtn.style.display = 'block';
                navContainer.classList.remove('first-section');
            } else {
                prevBtn.style.display = 'block';
                nextBtn.style.display = 'block';
                submitBtn.style.display = 'none';
                navContainer.classList.remove('first-section');
            }

            const progressText = document.getElementById('progressText');
            const progressFill = document.getElementById('progressFill');
            const percentage = (currentSection / totalSections) * 100;

            progressText.textContent = `Página ${currentSection} de ${totalSections}`;
            progressFill.style.width = `${percentage}%`;

            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function validateCurrentSection() {
            const activeSection = document.querySelector(`[data-section="${currentSection}"]`);
            let isValid = true;

            if (currentSection === 1) {
                const requiredFields = activeSection.querySelectorAll('input[required]');
                requiredFields.forEach(field => {
                    const errorMsg = field.parentElement.querySelector('.error-message');
                    
                    // Validação especial para placa
                    if (field.id === 'placaVeiculo') {
                        const placaValue = field.value.replace(/[^a-zA-Z0-9]/g, '');
                        if (placaValue.length !== 7) {
                            field.classList.add('error');
                            if (errorMsg) {
                                errorMsg.textContent = 'Placa deve ter 7 caracteres (ex: ABC-1234)';
                                errorMsg.style.display = 'block';
                            }
                            isValid = false;
                        } else {
                            field.classList.remove('error');
                            if (errorMsg) errorMsg.style.display = 'none';
                        }
                    } else {
                        // Validação padrão para outros campos
                        if (!field.value.trim()) {
                            field.classList.add('error');
                            if (errorMsg) errorMsg.style.display = 'block';
                            isValid = false;
                        } else {
                            field.classList.remove('error');
                            if (errorMsg) errorMsg.style.display = 'none';
                        }
                    }
                });
            } else if (currentSection >= 2 && currentSection <= 13) {
                const vistoriaItem = activeSection.querySelector('.vistoria-item');
                const radioGroup = vistoriaItem.querySelector('.radio-group');
                const radios = radioGroup.querySelectorAll('input[type="radio"]');
                const checked = Array.from(radios).find(r => r.checked);
                const errorMsg = vistoriaItem.querySelectorAll('.error-message')[1];

                if (!checked) {
                    if (errorMsg) errorMsg.style.display = 'block';
                    isValid = false;
                } else {
                    if (errorMsg) errorMsg.style.display = 'none';
                    
                    if (checked.value === 'irregular') {
                        const textarea = vistoriaItem.querySelector('textarea');
                        const textareaError = textarea.parentElement.querySelector('.error-message');
                        if (!textarea.value.trim()) {
                            textarea.classList.add('error');
                            if (textareaError) textareaError.style.display = 'block';
                            isValid = false;
                        } else {
                            textarea.classList.remove('error');
                            if (textareaError) textareaError.style.display = 'none';
                        }
                    }
                }
            }

            return isValid;
        }

        document.getElementById('nextBtn').addEventListener('click', function() {
            if (validateCurrentSection()) {
                if (currentSection < totalSections) {
                    currentSection++;
                    updateSection();
                }
            } else {
                alert('Por favor, preencha todos os campos obrigatórios desta página.');
            }
        });

        document.getElementById('prevBtn').addEventListener('click', function() {
            if (currentSection > 1) {
                currentSection--;
                updateSection();
            }
        });

        updateSection();

        // Submissão do formulário
        document.getElementById('vistoriaForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const submitBtn = document.getElementById('submitBtn');
            submitBtn.textContent = 'Enviando...';
            submitBtn.disabled = true;

            const formData = new FormData(this);

            // Enviar para webhook n8n
            fetch('https://grupoparana-n8n.qkcade.easypanel.host/webhook-test/checklist-veicular', {
                method: 'POST',
                body: formData
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error('Erro ao enviar formulário');
                }
                return response.json();
            })
            .then(data => {
                alert('Vistoria registrada com sucesso!');
                this.reset();
                
                document.querySelectorAll('.radio-item').forEach(item => {
                    item.classList.remove('selected-ok', 'selected-irregular');
                });
                document.querySelectorAll('.descricao-container').forEach(desc => {
                    desc.classList.remove('show');
                });
                
                document.getElementById('dataVistoria').valueAsDate = new Date();
                
                currentSection = 1;
                updateSection();
                
                submitBtn.textContent = 'Enviar';
                submitBtn.disabled = false;
            })
            .catch(error => {
                console.error('Erro:', error);
                alert('Erro ao enviar vistoria. Verifique sua conexão e tente novamente.');
                submitBtn.textContent = 'Enviar';
                submitBtn.disabled = false;
            });
        });
    </script>
</body>
</html>
